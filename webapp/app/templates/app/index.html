<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --tg-theme-bg-color: #ffffff;
      --tg-theme-text-color: #000000;
      --tg-theme-hint-color: #999999;
      --tg-theme-button-color: #40a7e3;
      --tg-theme-button-text-color: #ffffff;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--tg-theme-bg-color, #f5f5f5);
      color: var(--tg-theme-text-color, #222222);
      padding: 20px;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      max-width: 500px;
      width: 100%;
      background-color: var(--tg-theme-bg-color, #ffffff);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 20px;
      text-align: center;
    }

    h1 {
      font-size: 1.5rem;
      margin-bottom: 20px;
    }

    .info-card {
      padding: 15px;
      border-radius: 8px;
      background-color: rgba(0, 0, 0, 0.05);
      margin-bottom: 20px;
      text-align: left;
    }

    .info-item {
      display: flex;
      margin-bottom: 10px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      padding-bottom: 10px;
    }

    .info-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .info-label {
      flex: 1;
      font-weight: 500;
      color: var(--tg-theme-hint-color, #999999);
    }

    .info-value {
      flex: 2;
      font-weight: 500;
      word-break: break-all;
    }

    .status {
      margin: 15px 0;
      padding: 10px;
      border-radius: 8px;
      background-color: rgba(64, 167, 227, 0.1);
      color: var(--tg-theme-button-color, #40a7e3);
      font-weight: 500;
    }

    .error {
      background-color: rgba(255, 59, 48, 0.1);
      color: #ff3b30;
    }

    .button {
      background-color: var(--tg-theme-button-color, #40a7e3);
      color: var(--tg-theme-button-text-color, #ffffff);
      border: none;
      border-radius: 8px;
      padding: 12px 20px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: opacity 0.3s;
      width: 100%;
      margin-top: 15px;
    }

    .button:hover {
      opacity: 0.9;
    }

    .emoji {
      font-size: 3rem;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="emoji">üì±</div>
    <h1>Telegram Mini App</h1>
    
    <div id="status" class="status">–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞...</div>
    
    <div class="info-card" id="chatInfo" style="display: none;">
      <div class="info-item">
        <div class="info-label">Chat ID:</div>
        <div class="info-value" id="chatId">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">–¢–∏–ø —á–∞—Ç–∞:</div>
        <div class="info-value" id="chatType">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫:</div>
        <div class="info-value" id="chatTitle">-</div>
      </div>
    </div>
    
    <div class="info-card" id="userInfo" style="display: none;">
      <div class="info-item">
        <div class="info-label">User ID:</div>
        <div class="info-value" id="userId">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">–ò–º—è:</div>
        <div class="info-value" id="firstName">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">–§–∞–º–∏–ª–∏—è:</div>
        <div class="info-value" id="lastName">-</div>
      </div>
      <div class="info-item">
        <div class="info-label">Username:</div>
        <div class="info-value" id="username">-</div>
      </div>
    </div>

    <button class="button" id="closeButton">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const statusElement = document.getElementById('status');
      const chatInfoElement = document.getElementById('chatInfo');
      const userInfoElement = document.getElementById('userInfo');
      const closeButton = document.getElementById('closeButton');
      
      // –ü–æ–ª—É—á–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä Telegram WebApp
      const tg = window.Telegram.WebApp;
      
      if (!tg) {
        statusElement.textContent = '–û—à–∏–±–∫–∞: Mini App –Ω–µ –∑–∞–ø—É—â–µ–Ω –≤ Telegram';
        statusElement.classList.add('error');
        return;
      }
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
      tg.expand(); // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
      
      // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫ –∫–Ω–æ–ø–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è
      closeButton.addEventListener('click', () => {
        tg.close();
      });
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–Ω—ã –ª–∏ –¥–∞–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
      if (tg.initDataUnsafe) {
        if (tg.initDataUnsafe.chat) {
          // –ü–æ–ª—É—á–∞–µ–º chat_id –∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
          const chat = tg.initDataUnsafe.chat;
          
          document.getElementById('chatId').textContent = chat.id || '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
          document.getElementById('chatType').textContent = chat.type || '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
          document.getElementById('chatTitle').textContent = chat.title || chat.username || '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
          
          chatInfoElement.style.display = 'block';
          statusElement.textContent = '–î–∞–Ω–Ω—ã–µ –æ —á–∞—Ç–µ –ø–æ–ª—É—á–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!';
        } else {
          statusElement.textContent = '–î–∞–Ω–Ω—ã–µ –æ —á–∞—Ç–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ –∏–∑ —á–∞—Ç–∞.';
          statusElement.classList.add('error');
        }
        
        if (tg.initDataUnsafe.user) {
          // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
          const user = tg.initDataUnsafe.user;
          
          document.getElementById('userId').textContent = user.id || '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
          document.getElementById('firstName').textContent = user.first_name || '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ';
          document.getElementById('lastName').textContent = user.last_name || '-';
          document.getElementById('username').textContent = user.username ? '@' + user.username : '-';
          
          userInfoElement.style.display = 'block';
        }
      } else {
        statusElement.textContent = '–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏';
        statusElement.classList.add('error');
      }
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç–∞ –∏–∑ —Ç–µ–º—ã Telegram
      if (tg.themeParams) {
        document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color);
        document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color);
        document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color);
        document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color);
        document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color);
      }
    });
  </script>
</body>
</html>
